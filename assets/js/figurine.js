!function(){"use strict";const e={K:"♔",Q:"♕",R:"♖",B:"♗",N:"♘"},t=/(?<![a-zA-Z0-9])(O-O-O|O-O|[KQRBN][a-h]?[1-8]?x?[a-h][1-8](?:=[QRBN])?[+#]?)(?![a-zA-Z0-9])/g,n=new Set(["SCRIPT","STYLE","CODE","PRE","TEXTAREA","INPUT","SELECT","OPTION","NOSCRIPT","A"]);function o(e){return/[KQRBN]|O-O/.test(e)}function r(n){if(n.__figurined)return;const r=n.nodeValue;if(!r||!o(r))return;const i=r.replace(t,t=>"O-O"===t||"O-O-O"===t?t:e[t.charAt(0)]?e[t.charAt(0)]+t.slice(1):t);i!==r&&(n.nodeValue=i,n.__figurined=!0)}function i(e){const t=e.parentNode;return!!(!t||n.has(t.nodeName)||t.closest&&t.closest("pgn")||t.closest&&t.closest("puzzle"))}function c(e){if(!e||1!==e.nodeType)return;const t=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,{acceptNode:e=>i(e)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT});let n;for(;n=t.nextNode();)r(n)}function l(){c(document.body);new MutationObserver(e=>{for(const t of e)t.addedNodes&&t.addedNodes.forEach(e=>{1===e.nodeType&&c(e)})}).observe(document.body,{childList:!0,subtree:!0}),window.ChessFigurine=Object.freeze({run:e=>{c(e||document.body)}})}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",l,{once:!0}):l()}();
